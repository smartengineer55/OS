Experiment No:2B

// parent.c
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>
extern char **environ;
void sortAscending(int arr[], int n) {
int i, j, temp;
for (i = 0; i < n - 1; i++) {
for (j = i + 1; j < n; j++) {
if (arr[i] > arr[j]) {
temp=arr[i];
arr[i]=arr[j];
arr[j]=temp;
}
}
}
printf("Sorted Array (Ascending): ");
for (i = 0; i < n; i++) {
printf("%d '",arr[i]);
}
printf("\n");
}
int main() {
int n,i,arr[20];
pid_t pid;
printf("Enter number of elements: ");
scanf("%d",&n);
printf("Enter %d elements:\n", n);
for (i = 0; i < n; i++) {
scanf("%d", &arr[i]);
}
pid = fork(); //invoke fork system call create child process
if (pid < 0) { // error if fork fails
perror("fork failed");
return 1;
}
else if(pid>0){ // This is parent process
// Parent waits for child
// Sort in ascending order
printf("\n[Parent] PID = %d\n", getpid());
sortAscending(arr, n);
}
Experiment No:2B
else { //this is child process in which we load new program
// Child process â†’ prepare args for execve
wait(0);
char **args = malloc((n + 3) * sizeof(char *));
args[0] = "./child";
// Pass n as argv[1]
char *nStr = malloc(10);
sprintf(nStr, "%d", n);
args[1] = nStr;
// Pass array elements as argv[2..n+1]
for (i = 0; i < n; i++) {
char *numStr = malloc(10);
sprintf(numStr, "%d", arr[i]);
args[i + 2] = numStr;
}
args[n + 3] = NULL;
// Execve child program
if (execve("./child", args, environ) == -1) {
perror("execve failed");
exit(1);
}
}
return 0;
}


// child.c
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
int main(int argc, char *argv[]) {
int i, j, temp;
if (argc < 3) { // error condition
printf("Usage: %s <n> <elements> <key>\n", argv[0]);
return 1;
}
int n = atoi(argv[1]);
int arr[n];
for (int i = 0; i < n; i++) {
arr[i] = atoi(argv[i + 2]);
}
Experiment No:2B
printf("\n[Child Program Running] PID = %d\n", getpid());
printf("\nChild Sorts array in descending order:\n ");
for (i=0;i<n-1;i++) {
for (j=i+1; j<n;j++) {
if (arr[i]<arr[j]) {
temp = arr[i];
arr[i]=arr[j];
arr[j]=temp;
}
}
}
for (i=0;i<n;i++) {
printf("%d ",arr[i]);
}
printf("\n");
return 0;
}


#Outout :-
svpmitsl@svpmitsl-HP-EliteDesk-800-G2-SFF:~/Documents$ gcc Parent.c -o parent
svpmitsl@svpmitsl-HP-EliteDesk-800-G2-SFF:~/Documents$ gcc Child.c -o child
svpmitsl@svpmitsl-HP-EliteDesk-800-G2-SFF:~/Documents$ ./parent
Enter number of elements: 5
Enter 5 elements:
6
7
4
3
2
[Parent] PID = 4947
Sorted Array (Ascending): 2 3 4 6 7
svpmitsl@svpmitsl-HP-EliteDesk-800-G2-SFF:~/Documents$
[Child Program Running] PID = 4948
Child Sorts array in descending order:
7 6 4 3 2