#Inter-Process Communication(IPC) IN linux using FIFO.

#SERVER

#include <fcntl.h> 
#include <sys/stat.h> 
#include <sys/types.h> 
#include <unistd.h> 
#include<stdio.h> 
int main() 
{ 
 int fd,fd1; 
 char * myfifo = "myfifo"; 
 char * myfifo1 = "myfifo1"; 
 char buf[512]; 
 mkfifo(myfifo, 0666); 
 mkfifo(myfifo1, 0777); 
 fd = open(myfifo, O_WRONLY); 
 write(fd, "Hello friends... \nWelcome...\nI FIFO",  1024); 
printf("Data wrote in FIFO1 by writer\n"); 
sleep(2); 
 close(fd); 
 unlink(myfifo); 
 fd1 = open(myfifo1, O_RDONLY); 
 read(fd1, buf, sizeof(buf)); 
printf("Data received by FIFO2 by writer\n"); 
printf("%s",buf); 
unlink(myfifo1); 
 close(fd1); 
 return 0; 
} 

#CLIENT

#include <fcntl.h> 
#include <stdio.h> 
#include <sys/stat.h> 
#include <sys/types.h> 
#include <unistd.h> 
int main() 
{ 
 int fd,fd1; 
 char * myfifo = "myfifo"; 
char * myfifo1 = "myfifo1";
 char buf[512], ch[512]; 
 int words = 1, lines = 1, i=0; 
 FILE *fp; 
 fd = open(myfifo, O_RDONLY); 
 read(fd, buf, 1024); 
 printf("Message Received by reader in FIFO1: \n%s\n", buf); 
while(buf[i]!='\0') 
 { 
 if(buf[i]==' ') 
{
words++; 
} 
if(buf[i]=='\n') 
lines++; 
i++; 
 } 
printf("Analysis of message in reader...\n"); 
printf("Total words = %d \n",words); 
printf("Total lines = %d \n",lines); 
printf("Total characters = %d \n",i); 
sleep(2);  
 fp = fopen("test.txt", "w"); 
 fprintf(fp,"Total words = %d \n",words); 
fprintf(fp,"Total lines = %d \n",lines); 
fprintf(fp,"Total characters = %d \n",i); 
 fclose(fp); 
printf("Analysis in wrote in a file test.txt...\n"); 
sleep(2); 
i = 0; 
fp = fopen("test.txt", "r"); 
while(!feof(fp)) 
{ 
 ch[i] = fgetc(fp); 
i++; 
} 
fclose(fp); 
 close(fd); 
unlink(myfifo); 
 fd1 = open(myfifo1, O_WRONLY); 
 write(fd1, ch, sizeof(ch)); 
printf("Message wrote in FIFO2 by reader...\n"); 
sleep(2); 
 close(fd1); 
 return 0; 
} 

#OUTPUT:-
svpmit31@svpmit31-HP-EliteDesk-800-G2-SFF:~$ gcc server.c -o server
svpmit31@svpmit31-HP-EliteDesk-800-G2-SFF:~$ ./server
Data wrote in FIFO1 by writer
Data received by FIFO2 by writer
Total words = 4 
Total lines = 3 
Total characters = 35 

svpmit31@svpmit31-HP-EliteDesk-800-G2-SFF:~$ gcc client.c -o client
svpmit31@svpmit31-HP-EliteDesk-800-G2-SFF:~$ ./client
Message Received by reader in FIFO1: 
Hello friends... 
Welcome...
I FIFO
Analysis of message in reader...
Total words = 4 
Total lines = 3 
Total characters = 35 
Analysis in wrote in a file test.txt...
Message wrote in FIFO2 by reader...





